try{server=new WebSocket("ws://localhost:8080/"),alerts({icon:"success",title:"Servidor activo.",position:"bottom-start"})}catch(t){}server.onerror=function(t){alerts({icon:"error",title:"Servidor inactivo.",position:"bottom-start"}),resp=$.ajax(`${location.origin}/${location.pathname.split("/")[1]}/bin/start.php`,{async:!1})},server.onopen=function(t){session=automaticForm("readSession"),localStorage.setItem("rol",session.rol?session.rol:"empleado"),localStorage.setItem("usuario",session.usuario),localStorage.setItem("email",session.email)},server.onmessage=function(t){"alerts"!=(resp=JSON.parse(t.data)).type||(arrayAlert=resp.data.arrayAlert?resp.data.arrayAlert:{},typeAlert=resp.data.typeAlert?resp.data.typeAlert:"Sweetalert2",rol=String(localStorage.getItem("rol")),usuario=String(localStorage.getItem("usuario")),resp.rol==rol?alerts(arrayAlert,typeAlert):resp.usuario==usuario?alerts(arrayAlert,typeAlert):resp.rol||resp.usuario||alerts(arrayAlert,typeAlert))};
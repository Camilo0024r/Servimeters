!function (e) {
    e("html").append(`
    <div class="modal fade" id="modal-selectMaster">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="overlay">
                    <i class="fas fa-2x fa-sync fa-spin"></i>
                </div>
                <div class="modal-header">
                    <h4 class="modal-title">Select Master</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="ribbon-wrapper">
                    <div class="ribbon bg-info">
                        BETA
                    </div>
                </div>

                <div class="modal-body">
                    <div class="card card-primary card-outline">
                        <div class="card-body">
                            <ul class="nav nav-tabs" id="custom-content-below-tab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="update-content-tab" data-toggle="pill" href="#update-content" role="tab" aria-controls="update-content" aria-selected="true">Actualizar</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="add-content-tab" data-toggle="pill" href="#add-content" role="tab" aria-controls="add-content" aria-selected="false">Agregar</a>
                                </li>
                            </ul>
                            <div class="tab-content mt-3" id="custom-content-below-tabContent">
                                <div class="tab-pane fade show active" id="update-content" role="tabpanel" aria-labelledby="update-content-tab">
                                    <table class="table tableD">
                                        <thead>
                                            <tr>
                                                <th>Opciones</th>
                                                <th>Editar</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                                <div class="tab-pane fade" id="add-content" role="tabpanel" aria-labelledby="add-content-tab">
                                    <form>
                                        <h1>Pendiente :/</h1>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    `); let t = `${location.origin}/${location.pathname.split("/")[1]}`, a = function (e, t = null) { var a; let o = (a = e) instanceof Element || a instanceof HTMLDocument ? e : document.createElement(e); if (null !== t) for (data in t) ["text"].includes(data) ? o.textContent = t[data] : o.setAttribute(data, t[data]); return o }, o = function () { e("#modal-selectMaster table").DataTable().ajax.reload(null, !1) }; jQuery.fn.smTagName = function (e) { if (e) return this.prop("tagName") }, jQuery.fn.smLoadContent = function (e, t, o, l) { if (e) { for (ident in this.html(""), (checkSelect2 = this.hasClass("select2")) && this.select2("destroy"), t) this.append(a("option", { value: t[ident][o], text: t[ident][l] })); checkSelect2 && this.select2() } }, jQuery.fn.smModeEdit = function (t, a, l, n) { if (t) { let i = e(`[data-selectMaster="${t}"]`), s = this.val(), d = automaticForm("updateValueSql", [s, l, a, n]); d.error ? alerts({ text: `selectMaster->sql: ${d.error}`, duration: 1e4 }) : (l = i[0].selectMaster, checkSelect2 = i.hasClass("select2"), o(), checkSelect2 && i.select2("destroy"), e(`[data-selectMaster="${t}"]`).find(`[value="${a}"]`).text(s), checkSelect2 && i.select2()) } }, jQuery.fn.smChangeMode = function (t, a) { t && (e(`[data-show="${a}"]`).toggleClass("d-none"), e(`[data-edit="${a}"]`).toggleClass("d-none")) }, e.fn.selectMaster = function (a, o = !1) {
        let l = e(this), n = Date.now(), i = jQuery(l).smTagName(n); if (!0 !== o || !a.table || !a.option_value || ($checkTableExists = automaticForm("checkTableExists", [a.table])) || e.ajax(`${t}/assets/js/plugins/selectMaster.php?token=${n}&accion=create&table=${a.table}&option_value=${a.option_value}`), 1 == this.length && "SELECT" == i && a.table && a.option_value) {
            let s = e.extend({ table: void 0, option_id: "@primary", option_value: void 0, popover: { title: void 0, content: void 0 }, select2: !1 }, a); s.popover.title || (s.popover.title = "selectMaster"), s.popover.content || (s.popover.content = "Registros en total: @count"), l[0].selectMaster = s, l.attr("data-selectMaster", n); let d = automaticForm("getDataSql", [s.table, "1 = 1", `${s.option_id}, ${s.option_value}`]); if (d.error) alerts({ title: `selectMaster->Sql: ${d.error}`, icon: "Error", duration: "10000" }); else {
                "@primary" == s.option_id && (s.option_id = automaticForm("getNamePrimary", [s.table])), jQuery(l).smLoadContent(n, d, s.option_id, s.option_value); let r = s.popover.title.replaceAll("@count", d.length), c = s.popover.content.replaceAll("@count", d.length); ($poper = s.select2 && l.hasClass("select2") ? e($select2 = l[0].nextElementSibling) : l).attr("data-toggle", "popover").popover({
                    html: !0, container: "body", trigger: "focus click", title: function () {
                        return `
                            <div class="d-flex justify-content-between">
                                <div>${r}</div>
                                <div>
                                    <a class="mt-1 p-1 rounded btn-info ${n}">
                                        <i class="fa fa-cog"></i>
                                    </a>
                                </div>
                            </div>
                            `}, content: c
                }), e(document).on("click", `.${n}`, function () { e(".popover").popover("hide"), ($modal = e("#modal-selectMaster")).css("overflow-y", "auto"), $modal.find(".overlay").removeClass("d-none"), $modal.modal("show"), ($table = e("#modal-selectMaster table")).DataTable().destroy(), $table.DataTable(e.extend(datatableParams, { processing: !0, severSide: !0, order: [[0, "desc"]], ajax: `${t}/assets/js/plugins/selectMaster.php?token=${n}&accion=ssp&table=${s.table}&option_value=${s.option_value}`, deferRender: !0, initComplete: "" })), setTimeout(() => { $modal.find(".overlay").addClass("d-none") }, 1e3) })
            } return l
        } alerts({ title: "selectMaster: " + (1 != this.length ? "Objeto no encontrado." : "SELECT" != i ? `Objeto no valido: ${i}.` : a.table ? a.option_value ? "Error is undefined :/" : `Campo a mostrar es obligatorio: option_value->${a.option_value}.` : "Nombre de la tabla es obligatorio."), icon: "Error", duration: "10000" })
    }
}(jQuery);